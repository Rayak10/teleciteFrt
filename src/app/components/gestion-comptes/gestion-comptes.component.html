<hr/>
<hr/>    
<div class="container" >	       
<legend *ngIf="roleE=='ROLE_DRH'" class="navbar-brand titre"  > Gestion des employés</legend>
<form #getCompteForm="ngForm" [formGroup]="exform" (ngSubmit)="onSubmit(getCompteForm)">
<div *ngIf="roleE=='ROLE_DRH'"> 
  <div class="row">
  <div class="col col-md-2">
  <label class="control-label" >Nom :</label> 
 </div>
 <div class="col col-md-4">
  <input id="client-name" formControlName="nom" [(ngModel)]="employe.nomEmploye" autocomplete="off" name="nomEmploye" type="text" placeholder="tapez le nom de l'employé" class="form-control input-md" >
  <span class="help-block"></span>
  <small *ngIf="exform.get('nom').invalid && exform.get('nom').touched" class="textdanger">Nom est obligatoire</small>
  </div>
  <div class="col col-md-2">
  <label class="control-label" >Prenom :</label>  
</div>
<div class="col col-md-4">
  <input id="employe-prenom" formControlName="prenom" [(ngModel)]="employe.prenomEmploye" autocomplete="off" name="prenomEmploye" type="text" placeholder="tapez le prenom de l'employé" class="form-control input-md">
  <span class="help-block"></span> 
  <small *ngIf="exform.get('prenom').invalid && exform.get('prenom').touched" class="textdanger">Prenom est obligatoire</small>
  </div>
</div>
<div class="row">
  <div class="col col-md-2">
  <label class="control-label" >Date naissance :</label>  
  </div>
  <div class="col col-md-4">
    <input  formControlName="naissance"
    name="dateNaissance"
    placeholder = "Selectionner la date naissance"
    [(ngModel)]="employe.dateNaissance"
    autocomplete="off" 
    class="form-control"
    bsDatepicker
    [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }">
  <span class="help-block"></span> 
  <small *ngIf="exform.get('naissance').invalid && exform.get('naissance').touched" class="textdanger">Date naissance est obligatoire</small> 
  </div>  
  <div class="col col-md-2">
  <label class="control-label" >Date d'embauche :</label>  
  </div>
  <div class="col col-md-4">
    <input  formControlName="embauche"
    name="dateEmbauche"
    placeholder = "Selectionner la date embauche "
    [(ngModel)]="employe.dateEmbauche"    
    autocomplete="off"
    class="form-control"
     bsDatepicker
     [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" >
  <span class="help-block"></span>  
  <small *ngIf="exform.get('embauche').invalid && exform.get('embauche').touched" class="textdanger"> Date d'embauche est obligatoire</small> 
  </div>
</div>
<div class="row">
  <div class="col col-md-2">
  <label class="control-label">Post :</label>  
  </div>
  <div class="col col-md-4">
    <input id="employe-post" formControlName="post" [(ngModel)]="employe.post"  name="post" type="text" placeholder="tapez lepost de l'employe" class="form-control input-md">
  <span class="help-block"></span> 
  <small *ngIf="exform.get('post').invalid && exform.get('post').touched" class="textdanger"> Post est obligatoire</small>  
  </div>
  <div class="col col-md-2">
  <label class="control-label">Role :</label> 
  </div> 
  <div class="col col-md-4">
    <select formControlName="role"
     type="text" 
     class="form-control "
      id="field_role"
        name="role" [(ngModel)]="selectedRoleId"
        (change)="onChangeRole($event)">
      <option  *ngFor="let r of roleArray" [value]="r.idRole">
        {{r.nomRole}}
      </option>
    </select>
    <small *ngIf="exform.get('role').invalid && exform.get('role').touched" class="textdanger"> Role est obligatoire</small>  
    <p class="help-block"></p>
    </div>
</div>

<div class="row">
  <div class="col col-md-2">
  <label class="control-label">Matricule :</label>
  </div>
  <div class="col col-md-4">
    <input id="employe-matricule" formControlName="matricule" [(ngModel)]="employe.matricule"   class="form-control" placeholder="tappez matricule employé" type="double">
    <small *ngIf="exform.get('matricule').invalid && exform.get('matricule').touched" class="textdanger"> Matricule est obligatoire</small>  
  </div>
    <div class="col col-md-2">
  <label class="control-label">Salaire :</label>
    </div>
    <div class="col col-md-4">
      <div class="input-group">
      <span class="input-group-addon">DTN</span>
      <input id="employe-salaire" formControlName="salaire" [(ngModel)]="employe.salaire" autocomplete="off" name="salaire" class="form-control" placeholder="tappez salaire en dinare" type="double">
      <small *ngIf="exform.get('salaire').invalid && exform.get('salaire').touched" class="textdanger"> Salaire est obligatoire</small>  
    </div>
    <p class="help-block"></p>
  </div>
</div>

<div class="row"> 
   <div class="col col-md-2">
      <label class="control-label">Bureau :</label>
   </div>
   <div class="col col-md-4">
    <select formControlName="bureau"
     type="text" 
     class="form-control "
      id="field_bureau"
        name="bureau" [(ngModel)]="selectedBureauId"
        (change)="onChangeBureau($event)">
      <option  *ngFor="let b of bureauArray" [value]="b.idBureau">
        {{b.nomBureau}}
      </option>
    </select>
    <small *ngIf="exform.get('bureau').invalid && exform.get('bureau').touched" class="textdanger"> Sélectionner un bureau</small>  
    <p class="help-block"></p>
    </div>
    <div class="col col-md-2">
      <label class="control-label">Departement :</label>
    </div>
    <div class="col col-md-4">
      <select formControlName="departement"
       type="text" 
       class="form-control "
        id="field_bureau"
          name="bureau" [(ngModel)]="selectedDepartementId"
          (change)="onChangeDepartement($event)">
        <option  *ngFor="let b of departementArray" [value]="b.idDepartement">
          {{b.nomDepartement}}
        </option>
      </select>
      <small *ngIf="exform.get('departement').invalid && exform.get('departement').touched" class="textdanger"> Sélectionner un departement</small>  
      <p class="help-block"></p>
</div>
</div>
<div class="row"> 
  <div class="col col-md-2">
  <label class="control-label">Equipe :</label>
  </div>
  <div class="col col-md-4">
    <select formControlName="equipe"
     type="text" 
     class="form-control "
      id="field_equipe"
        name="equipe" [(ngModel)]="selectedEquipeId"
        (change)="onChangeEquipe($event)">
      <option  *ngFor="let e of equipeArray" [value]="e.idEquipe">
        {{e.nomEquipe}}
      </option>
    </select>
    <small *ngIf="exform.get('equipe').invalid && exform.get('equipe').touched" class="textdanger"> Sélectionner une équipe</small>  
    <p class="help-block"></p>
    </div>
    <div class="col col-md-2">

  <label class="control-label">Email :</label>
    </div>
    <div class="col col-md-4">
      <div class="input-group">
      <span class="input-group-addon">@</span>
      <input id="employe-email" formControlName="email" [(ngModel)]="employe.email"  name="email" autocomplete="off"class="form-control" placeholder="tonnom@tondomain.tn" type="email">
     
      <small *ngIf="exform.get('email').errors?.required && exform.get('email').touched" class="textdanger">L'email est obligatoire</small>
      <small *ngIf="exform.get('email').errors?.pattern && exform.get('email').touched" class="textdanger">Veuillez fournir une adresse email valide</small>
      </div>
    
  </div>
   
  
</div>

<!-- Multiple Radios -->
<div class="row"> 
 
  <div class="col col-md-2">

  <label class="control-label">Client status :</label>
  </div>
  <div class="col col-md-4">
    <div class="radio">
    <label for="client-status-0">
      <input type="radio"  [(ngModel)]="employe.active"  id="client-status-0" value="true" checked>
      Active
    </label>
  </div>
  <div class="radio">
    <label>
      <input type="radio"  [(ngModel)]="employe.active" name="active" id="client-status-1" value="false">
      Inactive
    </label>
  </div>
  </div>
  <div class="col col-md-2">
  <label class="control-label">Mot de passe :</label>
  </div>
  <div class="col col-md-4">
    <div class="input-group">
      <span class="input-group-addon">*</span>
      <input   type="password"  formControlName="password"  [(ngModel)]="employe.password" class="form-control"
       placeholder="tapez mot de passe">


      

       <small *ngIf="exform.get('password').errors?.minlength && exform.get('password').touched" class="textdanger">le mot de passe doit contenir au moins 8 caractères!</small>
       <small  *ngIf="exform.get('password').errors?.required && exform.get('password').touched" class="textdanger">Mot de passe est obligatoire</small>

      </div>
  </div>
  <div class="col col-md-2">
  <label class="control-label">Confirmation mot de passe :</label>
  </div>
  <div class="col col-md-4">
    <div class="input-group">
      <span class="input-group-addon"> * </span>
      <input   type="password" id="employe-confirmationpassword" formControlName="confirme" autocomplete="off" 
      name="password" class="form-control" placeholder="confirmez mot de passe">

      <small *ngIf="exform.get('confirme').errors?.required && exform.get('confirme').touched" class="textdanger">Confirmation mot de passe est obligatoire</small>  
      <small *ngIf="exform.get('confirme').valid && exform.get('confirme').value !=exform.get('password').value" class="textdanger">Le mot de passe saisi ne correspond pas</small>  

    </div>
    
  </div>
</div>





 
<!-- Button -->
<div class="row">
  
  <div class="col col-md-2">
  <label class="control-label">Photo :</label>
  </div>
  <div class="col col-md-3">
    <input type="file" class="btn btn-success btn-sm"  (change)="OnSelectFile($event)"> 
</div>
<div class="col col-md-2 zoom">
  <img class="topright"  [src]="urllink" name="photo" id="profileDisplay">
</div>
<label class="col-md-4 control-label" for="btn-save"></label>

    <div class="col-md-1">
     <button id="btn-save" name="btn-save" class="btn btn-success" (click)="save(getCompteForm)">Créer</button>
    </div>
</div>


</div>

<!-- LIST -->
<div class=col-md-12 >
    
    <form id="form-list-employe" >
            <legend class="navbar-brand titre">Liste des employés</legend>
    
   <!-- <div class="pull-right">
        <a class="btn btn-default-btn-xs btn-primary"><i class="glyphicon glyphicon-refresh"></i> Refresh</a>
        <a class="btn btn-default-btn-xs btn-success"><i class="glyphicon glyphicon-plus"></i> New</a>
    </div>-->
    <table class="table table-bordered table-condensed table-hover">
        <thead>
            <tr>
                <th scope="col" width=20%>Nom</th>
                <th scope="col" width=20%>Prenom</th>
                <th scope="col" width=20%>Email</th>
                <th scope="col" width=20%>Status</th>
                <th scope="col" width=20%>Actions</th>
            </tr>
                
        </thead>
        <tbody id="form-list-employes-body"  *ngFor="let employe of employes | async">
            <tr>
                <td>{{employe.nomEmploye}}</td>
                <td>{{employe.prenomEmploye}}</td>
                <td>{{employe.email}}</td>
                <td>{{employe.active}}</td>
                
                <td>
           
                    <a title="Les détails de l'employé" class="btn btn-default btn-sm "(click)="employeDetails(employe.idEmploye)"> <i class="glyphicon glyphicon-eye-open text-primary"  ></i> </a> 
                    <a title="Modifier ces informations" class="btn btn-default btn-sm "(click)="updateEmploye(employe.idEmploye)"> <i class="glyphicon glyphicon-edit text-primary"></i> </a>                   
                    <a  *ngIf="roleE=='ROLE_DRH'" title="Supprimer ce compte"  class="btn btn-default btn-sm " (click)="deleteEmploye(employe.idEmploye)"ng-change="gotoList()"> <i class="glyphicon glyphicon-trash text-danger"></i> </a>
                    <a  *ngIf="roleE=='ROLE_SCRUM_MASTER'" disabled title="Vous n'avez pas le droit"   class="btn btn-default btn-sm " (click)="deleteEmploye(employe.idEmploye)"ng-change="gotoList()"> <i class="glyphicon glyphicon-trash text-danger"></i> </a>
                  
                  </td>

            </tr>
        </tbody>
    </table>
    </form>

    
</div>


 
</form>


</div> 