<hr/>
<hr/>
<!-- FORM  -->	    
	   <div class="col-md-16">	       
     
<fieldset>

<!-- Form Name -->

<legend  class="navbar-brand titre"  > Gestion des sprints</legend>
<form #getSprintForm="ngForm" (ngSubmit)="onSubmit(getSprintForm)">
<!-- Text input-->
<div class="form-group">
  <label class="col-md-2 control-label" >Nom de Sprint :</label>  
  <div class="col-md-4">
  <input id="sprint-name" required [(ngModel)]="sprint.nomSprint" name="sprint-name" type="text" placeholder="tapez le nom du sprint" class="form-control input-md" >
  <span class="help-block"></span>  
  </div>
  <label class="col-md-2 control-label">Etat du sprint :</label>
  <div class="col-md-4">
    <select required
     type="text" 
     class="form-control "
      id="field_sprint"
        name="sprintEtat" [(ngModel)]="sprint.etatSprint">
      <option *ngFor='let etat of etatArray'> {{etat}} </option>
      
    </select>
    <p class="help-block"></p>
    </div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label">Date début Sprint :</label>  
    <div class="col-md-4">
      <input  
      name="sprint-date-debut"
      placeholder = "Selectionner la date début"
      [(ngModel)]="sprint.dateDebut"
      autocomplete="off" 
      class="form-control"
      bsDatepicker
      [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }">
   
    <span class="help-block"></span>  
    </div>  
    <label class="col-md-2 control-label">Date fin sprint :</label>  
    <div class="col-md-4">
      <input  
      name="sprint-date-fin"
      placeholder = "Selectionner la date fin"
      [(ngModel)]="sprint.dateFin"
      autocomplete="off" 
      class="form-control"
      bsDatepicker
      [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }">
   
    <span class="help-block"></span>  
    </div>  
  </div>
  <label class="col-md-2 control-label" >Description  :</label>  
  <div class="col-md-4">
    <textarea id="sprint-description"required [(ngModel)]="sprint.descriptionSprint" name="sprint-description" type="text" placeholder="tapez une description pour ce sprint ..." class="form-control input-md"></textarea>
  <span class="help-block"></span>  
  </div>
  <label class="col-md-2 control-label">Projet :</label>
  <div class="col-md-4">
    <select required
     type="text" 
     class="form-control "
      id="field_projet"
        name="projet" [(ngModel)]="selectedProjetId"
        (change)="onChange($event)">
      <option  *ngFor="let p of projetArray" [value]="p.idProjet">
        {{p.nomProjet}}
      </option>
    </select>
    <p class="help-block"></p>
    </div>
    
    <hr>
<!-- Button -->

    <label class="col-md-4 control-label" for="btn-save"></label>
    <div class="col col-lg-2">
     <button id="btn-save" name="btn-save" type="submit" class="btn btn-success">Enregistrer</button>
    </div>
</form>
</fieldset>



	   </div> 
	    



<!-- LIST -->
<div class=col-md-12 >
    
    <form id="form-list-sprintsProjet" >
            <legend class=" col-md-12 titre" (click)="toggleBPList()">   Liste des Backlog Produit :</legend>
    
   <!-- <div class="pull-right">
        <a class="btn btn-default-btn-xs btn-primary"><i class="glyphicon glyphicon-refresh"></i> Refresh</a>
        <a class="btn btn-default-btn-xs btn-success"><i class="glyphicon glyphicon-plus"></i> New</a>
    </div>-->
    <table *ngIf="showBPList" class="table table-bordered table-condensed table-hover">
        <thead>
            <tr>
              <th scope="col" width=25%>Projet</th>
                <th scope="col" width=25%>Backlog Produit</th>                
                <th scope="col" width=25%>Statut</th>
                <th scope="col" width=25%>Actions</th>
            </tr>
                

             

        </thead>
        <ng-container *ngFor="let sprint of sprints | async">
          <tbody id="form-list-projets-body" *ngIf="sprint.nomSprint=='Backlog produit'">
            <tr>
              <td>{{sprint.projet.nomProjet}}</td>
                <td>{{sprint.nomSprint}}</td>
                <td>{{sprint.etatSprint}}</td>

                <td>
                  
                    <a title="les détails du projet" class="btn btn-default btn-sm "(click)="sprintDetails(sprint.idSprint)"> <i class="glyphicon glyphicon-eye-open text-primary"  ></i> </a> 
                    <a title="modifier le  projet" class="btn btn-default btn-sm "(click)="updateSprint(sprint.idSprint)"> <i class="glyphicon glyphicon-edit text-primary"></i> </a>
                    <a title="supprimer le projet " class="btn btn-default btn-sm " (click)="deleteSprints(sprint.idSprint)"> <i class="glyphicon glyphicon-trash text-danger"></i> </a>
                    
                   
                </td>
            </tr>
        </tbody>
      </ng-container>
    </table>
    </form>

    
</div>
<!-- LIST -->
<div class=col-md-12 >
    
  <form id="form-list-sprintsProjet" >
    <div class="form-group">
                <legend  class=" col-md-3 titre">Liste des sprints du projet : </legend>
                  <div class="col-md-3">
            <select required
             type="text" 
             class="form-control "
              id="field_projetSprints"
                name="projetSprints" [(ngModel)]="selectedProjetSprintsId"
                (change)="onChange1($event)">
              <option  *ngFor="let p of projetArray" [value]="p.idProjet">
                {{p.nomProjet}}
              </option>
            </select>
            <p class="help-block"></p>
            </div>
          </div>

 <!-- <div class="pull-right">
      <a class="btn btn-default-btn-xs btn-primary"><i class="glyphicon glyphicon-refresh"></i> Refresh</a>
      <a class="btn btn-default-btn-xs btn-success"><i class="glyphicon glyphicon-plus"></i> New</a>
  </div>-->
  <table *ngIf="selectedProjetSprintsId" class="table table-bordered table-condensed table-hover">
      <thead>
          <tr>
            <th scope="col" width=20% >Projet :</th>   

              <th scope="col" width=20%>Nom sprint</th>   
              <th scope="col" width=20%>Date début</th> 
              <th scope="col" width=20%>Date fin</th>              
              <th scope="col" width=10%>Statut</th>
              <th scope="col" width=10%>Actions</th>
          </tr>
              

           

      </thead>
        <tbody id="form-list-projets-body">
          <tr>  
          <td *ngIf="sprintsProjetArray[0]!= undefined" [attr.rowspan]="sprintsProjetArray.length + 1">{{sprintsProjetArray[0].projet.nomProjet}}</td>
          </tr>
          <tr *ngFor="let sprint of sprintsProjetArray">
                     

              <td>{{sprint.nomSprint}}</td>
              <td>{{sprint.dateDebut}}</td>
              <td>{{sprint.dateFin}}</td>
              <td>{{sprint.etatSprint}}</td>

              <td>
                
                  <a title="les détails du projet" class="btn btn-default btn-sm "(click)="sprintDetails(sprint.idSprint)"> <i class="glyphicon glyphicon-eye-open text-primary"  ></i> </a> 
                  <a title="modifier le  projet" class="btn btn-default btn-sm "(click)="updateSprint(sprint.idSprint)"> <i class="glyphicon glyphicon-edit text-primary"></i> </a>
                  <a title="supprimer le projet " class="btn btn-default btn-sm " (click)="deleteSprints(sprint.idSprint)"> <i class="glyphicon glyphicon-trash text-danger"></i> </a>
                  
                 
              </td>
  </tr>
    </tbody>
  </table>
  </form>

  
</div>
